<!DOCTYPE html>
<html>
<head>
  <title>Magnetize Aura</title>
  <style>
    body { margin: 0; background: #000; overflow: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; font-family: Arial, sans-serif; }
    canvas { border-radius: 50%; background: radial-gradient(circle, #222, #000); margin-top: 20px; }
    button {
      padding: 10px 20px;
      font-size: 18px;
      background: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin-top: 10px;
      transition: background-color 0.3s ease;
    }
    button.selected {
      background: #4CAF50;
      color: #fff;
    }
    #status { color: #fff; margin-top: 10px; font-size: 18px; }
  </style>
</head>
<body>
  <!-- Gender Selection -->
  <div>
    <button id="maleBtn">I Am Male</button>
    <button id="femaleBtn">I Am Female</button>
  </div>
  
  <!-- Attract Toggle -->
  <button id="toggleBtn">Attract ON</button>
  <p id="status">Attract Mode: OFF</p>

  <!-- Canvas for Aura Display -->
  <canvas id="auraCanvas" width="400" height="400"></canvas>

  <script>
    const canvas = document.getElementById('auraCanvas');
    const ctx = canvas.getContext('2d');
    const statusText = document.getElementById('status');
    const toggleBtn = document.getElementById('toggleBtn');
    let particles = [];
    let mode = 'attract'; // Default attraction
    let userGender = 'male'; // Default gender

    // Generate particles
    for (let i = 0; i < 100; i++) {
      particles.push({
        x: Math.random() * 400,
        y: Math.random() * 400,
        dx: (Math.random() - 0.5) * 1.5,
        dy: (Math.random() - 0.5) * 1.5
      });
    }

    // Create Audio Context for playing frequency
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    let oscillator;

    function playFrequency(frequency) {
      if (oscillator) oscillator.stop(); // Stop any existing frequency
      oscillator = audioContext.createOscillator();
      oscillator.type = 'sine'; // Sine wave for a pure tone
      oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
      oscillator.connect(audioContext.destination);
      oscillator.start();
    }

    function stopFrequency() {
      if (oscillator) oscillator.stop();
    }

    function drawParticles() {
      ctx.clearRect(0, 0, 400, 400);

      for (let p of particles) {
        const cx = 200, cy = 200;
        let angle = Math.atan2(cy - p.y, cx - p.x);
        let force = 0.5;

        if (mode === 'attract') {
          p.x += Math.cos(angle) * force;
          p.y += Math.sin(angle) * force;
        } else {
          // No movement in 'OFF' state
        }

        // Draw particle with color based on gender
        let color = (userGender === 'male' && mode === 'attract') ? '#ffcc00' : (userGender === 'female' && mode === 'attract') ? '#66ccff' : '#ffffff';
        ctx.beginPath();
        ctx.arc(p.x, p.y, 3, 0, Math.PI * 2);
        ctx.fillStyle = color;
        ctx.fill();
      }

      requestAnimationFrame(drawParticles);
    }

    drawParticles();

    // Toggle attraction mode
    toggleBtn.onclick = () => {
      mode = (mode === 'attract') ? 'off' : 'attract';
      toggleBtn.textContent = mode === 'attract' ? 'Attract OFF' : 'Attract ON';
      statusText.textContent = `Attract Mode: ${mode === 'attract' ? 'ON' : 'OFF'}`;
      
      if (mode === 'attract') {
        playFrequency(userGender === 'male' ? 528 : 639); // 528 Hz for Male -> Female, 639 Hz for Female -> Male
      } else {
        stopFrequency();
      }
    };

    // Gender toggle
    document.getElementById('maleBtn').onclick = () => {
      userGender = 'male';
      setGenderAttributes();
    };

    document.getElementById('femaleBtn').onclick = () => {
      userGender = 'female';
      setGenderAttributes();
    };

    function setGenderAttributes() {
      // Highlight selected gender button
      const maleBtn = document.getElementById('maleBtn');
      const femaleBtn = document.getElementById('femaleBtn');
      
      if (userGender === 'male') {
        maleBtn.classList.add('selected');
        femaleBtn.classList.remove('selected');
      } else {
        femaleBtn.classList.add('selected');
        maleBtn.classList.remove('selected');
      }

      if (userGender === 'male') {
        // Male attracts female (use pink/golden aura)
        toggleBtn.textContent = 'Attract ON';
      } else {
        // Female attracts male (use blue/silver aura)
        toggleBtn.textContent = 'Attract ON';
      }
      statusText.textContent = `Attract Mode: OFF`;
      mode = 'off'; // Default to off when gender is selected
      stopFrequency();
    }

    // Set Male as default gender when the page loads
    window.onload = () => {
      setGenderAttributes();
    };
  </script>
</body>
</html>
